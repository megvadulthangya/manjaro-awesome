# Maintainer: megvadulthangya <hello@gshoots.hu>
pkgname=awesome-rofi
pkgver=r157.83dee18
pkgrel=1
pkgdesc="A huge collection of Rofi-based custom Applets, Launchers & Powermenus, fully compatible with Awesome WM."
arch=('any')
url="https://github.com/megvadulthangya/awesome-rofi"
license=('GPL3')
depends=('rofi')
makedepends=('git') # Szükséges a verziózáshoz
# A source-t git-re cseréltem, hogy lássa a verziókat
source=("git+https://github.com/megvadulthangya/awesome-rofi.git#branch=my-awesome-config")
sha256sums=('SKIP')

pkgver() {
  cd "$srcdir/awesome-rofi"
  # Formátum: r<commits>.<hash> (pl: r161.7c7070e)
  printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

package() {
  # Git forrásnál a mappa neve a repo neve (nincs -branch utótag)
  cd "$srcdir/awesome-rofi"
  
  # Fonts
  install -dm755 "$pkgdir/usr/share/fonts/rofi-themes"
  cp -r fonts/* "$pkgdir/usr/share/fonts/rofi-themes/"
  
  # Scripts
  install -dm755 "$pkgdir/usr/bin"
  cp -r files/scripts/* "$pkgdir/usr/bin/"
  
  # Rofi config
  install -dm755 "$pkgdir/etc/skel/.config/rofi"
  cp -r files/* "$pkgdir/etc/skel/.config/rofi/"
}
